#include <stdio.h>

int main() {
    int frames, pages, i, j, k, faults = 0;

    printf("Enter number of frames: ");
    scanf("%d", &frames);

    printf("Enter number of pages: ");
    scanf("%d", &pages);

    int page[pages], frame[frames];

    printf("Enter page reference string:\n");
    for(i = 0; i < pages; i++)
        scanf("%d", &page[i]);

    for(i = 0; i < frames; i++)
        frame[i] = -1;

    for(i = 0; i < pages; i++) {
        int found = 0;

        for(j = 0; j < frames; j++)
            if(frame[j] == page[i])
                found = 1;

        if(!found) {
            int farthest = -1, index = -1;

            for(j = 0; j < frames; j++) {
                int pos = -1;
                for(k = i + 1; k < pages; k++) {
                    if(frame[j] == page[k]) {
                        pos = k;
                        break;
                    }
                }

                if(pos == -1) {
                    index = j;
                    break;
                }

                if(pos > farthest) {
                    farthest = pos;
                    index = j;
                }
            }

            frame[index] = page[i];
            faults++;
        }
    }

    printf("Total Page Faults (Optimal): %d\n", faults);
    return 0;
}
